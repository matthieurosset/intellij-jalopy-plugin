<idea-plugin>
    <id>com.alexeyhanin.intellij.jalopyplugin</id>
    <name>Jalopy Plugin</name>
    <vendor email="mail@alexeyhanin.com" url="https://github.com/ahanin">Alexey Hanin</vendor>

    <description><![CDATA[
      <h1>Jalopy Code Formatter Plugin</h1>

      <p>Use Ctrl+Shift+P to format currently active document, or alternatively, enable automatic formatting on save in
      plugin configuration.</p>

      <h2>Features</h2>
      <ul>
          <li>Manual formatting with keyboard shortcut</li>
          <li>Automatic formatting on file save</li>
          <li>Custom Jalopy profile (convention XML) support</li>
      </ul>

      <h2>Compatibility</h2>
      <p>Compatible with IntelliJ IDEA 2025.1+</p>

      <h2>Source Code</h2>
      <p>Github: <a href="https://github.com/ahanin/intellij-jalopy-plugin">https://github.com/ahanin/intellij-jalopy-plugin</a></p>
      ]]></description>

    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.modules.lang</depends>

    <extensions defaultExtensionNs="com.intellij">
        <!-- Application-level settings service -->
        <applicationService
                serviceImplementation="com.alexeyhanin.intellij.jalopyplugin.service.JalopySettingsService"/>

        <!-- Settings configurable -->
        <applicationConfigurable
                parentId="tools"
                instance="com.alexeyhanin.intellij.jalopyplugin.settings.JalopyConfigurable"
                id="com.alexeyhanin.intellij.jalopyplugin.settings.JalopyConfigurable"
                displayName="Jalopy"/>
    </extensions>

    <applicationListeners>
        <!-- Listener for format on save -->
        <listener
                class="com.alexeyhanin.intellij.jalopyplugin.listener.JalopyFileDocumentManagerListener"
                topic="com.intellij.openapi.fileEditor.FileDocumentManagerListener"/>
    </applicationListeners>

    <actions>
        <group id="JalopyPlugin.ActionGroup">
            <add-to-group group-id="CodeMenu" anchor="last"/>
            <action id="JalopyPlugin.FormatAction"
                    class="com.alexeyhanin.intellij.jalopyplugin.action.FormatAction"
                    text="Format with _Jalopy"
                    description="Format current file with Jalopy">
                <keyboard-shortcut keymap="$default" first-keystroke="shift ctrl P"/>
            </action>
        </group>
    </actions>

</idea-plugin>
